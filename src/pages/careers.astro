---
import BaseLayout from "../layouts/BaseLayout.astro";
import StoreSlider from "../components/StoreSlider.astro";
import ScrollWiggle from "../components/ScrollWiggle.astro";
---

<BaseLayout title="Join Our Team - Now Hiring at The Taco Project | NY, CT" description="We're currently hiring front of house and back of house staff. Please fill out the application and we'll reach out to you if it's a fit!">


    <header class="flex flex-col md:grid md:min-h-[calc(100vh-93px)] w-full md:grid-cols-[1fr_minmax(0,calc(var(--max-content-width)*0.6))_minmax(0,calc(var(--max-content-width)*0.4))_1fr] md:grid-rows-1 overflow-hidden">
        <div class="hidden md:block col-start-1 col-end-3 row-start-1 bg-crema"></div>
        <div class="hidden md:block col-start-3 col-end-5 row-start-1 bg-cover bg-center" style="background-image: url('/careers-banner-v2.webp');"></div>

        <div class="bg-crema md:bg-transparent md:col-start-2 md:row-start-1 z-10 flex flex-col justify-between px-5 py-6 md:p-8 md:py-16">
            <h1 class="font-futura text-[56px] md:text-8xl font-black uppercase leading-[0.88] tracking-[-0.05em] text-citrus mb-6 md:mb-8">
                Join the Taco Project Team
            </h1>

            <div class="flex flex-col md:flex-row items-start md:items-end gap-8">
                <div class="aspect-square w-full overflow-hidden max-w-full md:max-w-60">
                    <img src="/careers-banner-tn.webp" class="object-cover w-full h-full" alt="Employee at The Taco Project" width="450" height="450" />
                </div>

                <div>
                    <p class="font-geist text-sm leading-[1.4] text-ink max-w-full md:max-w-[340px] mb-4">
                        The Taco Project restaurants are Mexican-inspired, polished casual / quick service taquerias, located in Westchester County, NY, and Fairfield County, CT. If you've got a passion for food and love working alongside vibrant, growth-minded humans, you'll fit right in.
                    </p>


                    <div class="flex items-center justify-between">
                        <a href="#apply" class="group flex items-center justify-between w-full gap-2">
                            <div class="font-futura text-citrus text-[40px] md:text-[56px] leading-none uppercase tracking-tight pb-1.5 transition-colors duration-500 group-hover:text-ink group-focus:text-ink">
                                Join Us
                            </div>
                            <div class="flex items-center gap-2 text-citrus font-geist text-sm uppercase transition-all duration-500 pr-4 group-hover:pr-0 group-hover:text-ink group-focus:pr-0 group-focus:text-ink">
                                Apply Today
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" class="size-[13px] rotate-90">
                                    <use href="#icon-arrow-right"></use>
                                </svg>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="hidden md:block col-start-3 row-start-1 z-10"></div>

        <!-- Mobile Bottom Image -->
        <div class="block md:hidden w-full h-[50vh] bg-cover bg-center" style="background-image: url('/careers-banner-v2.webp');"></div>
    </header>



    <section id="working_with_us" class="bg-crema flex flex-col pb-20 pt-10">
        <div class="container">
            <div class="flex mb-12">
                <h2 class="font-holiday text-citrus text-6xl leading-none -rotate-2">Why you&lsquo;ll love working with us</h2>
            </div>

            <div class="flex flex-col md:flex-row gap-6 justify-center items-start">
                <div class="flex flex-col gap-3.5 w-full">
                    <div class="w-full overflow-hidden relative">
                        <img src="/careers-grid-1.webp" alt="Careers at The Taco Project" class="w-full h-full object-cover" loading="lazy" decoding="async" />
                    </div>
                    <div class="flex flex-col gap-2">
                        <h3 class="font-futura text-citrus text-[32px] tracking-tight">Good energy, every shift</h3>
                        <p class="font-geist text-ink text-sm leading-5">Work in a place where the vibes are high, the playlists are good, and the people actually like being here.</p>
                    </div>
                </div>

                <div class="flex flex-col gap-3.5 w-full">
                    <div class="w-full overflow-hidden relative">
                        <img src="/careers-grid-2.webp" alt="Flexible Schedule at The Taco Project" class="w-full h-full object-cover" loading="lazy" decoding="async" />
                    </div>
                    <div class="flex flex-col gap-2">
                        <h3 class="font-futura text-citrus text-[32px] tracking-tight">Fuel for your future</h3>
                        <p class="font-geist text-ink text-sm leading-5">Competitive pay, flexible schedules, and room to grow, because your goals matter.</p>
                    </div>
                </div>

                <div class="flex flex-col gap-3.5 w-full">
                    <div class="w-full overflow-hidden relative">
                        <img src="/careers-grid-3.webp" alt="Feels like fam at The Taco Project" class="w-full h-full object-cover" loading="lazy" decoding="async" />
                    </div>
                    <div class="flex flex-col gap-2">
                        <h3 class="font-futura text-citrus text-[32px] tracking-tight">Feels like fam</h3>
                        <p class="font-geist text-ink text-sm leading-5">We've built something real: a crew that's supportive, collaborative, and always up for a post-shift taco (or two).</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Careers Form -->
    <section id="apply" class="bg-sky py-16">
        <div class="container">
            <div class="flex flex-col gap-5 items-start text-ink mb-[52px]">
                <h2 class="font-futura text-6xl md:text-[104px] leading-none tracking-tight uppercase text-ink">Apply Today</h2>
                <p class="font-geist font-normal text-sm leading-5 mt-2">We are currently hiring for all positions.</p>
            </div>

            <form id="careers-form" name="careers" method="POST" action="/careers/?success=true#apply" data-netlify="true" netlify-honeypot="bot-field" enctype="multipart/form-data" class="flex flex-col gap-[30px]">
                <input type="hidden" name="form-name" value="careers" />
                <p class="hidden">
                    <label>Don't fill this out if you're human: <input name="bot-field" /></label>
                </p>
                <!-- Row 1 -->
                <div class="flex flex-col md:flex-row gap-6 w-full">
                    <div class="flex-1 flex flex-col gap-3.5">
                        <label for="first_name" class="font-geist font-normal text-sm leading-5 text-ink">First Name*</label>
                        <input type="text" id="first_name" name="first_name" required class="bg-crema rounded-lg px-6 py-4 font-geist text-sm leading-5 text-ink border-none outline-none focus:ring-2 focus:ring-ocean transition placeholder:text-ink/50" />
                    </div>
                    <div class="flex-1 flex flex-col gap-3.5">
                        <label for="last_name" class="font-geist font-normal text-sm leading-5 text-ink">Last Name*</label>
                        <input type="text" id="last_name" name="last_name" required class="bg-crema rounded-lg px-6 py-4 font-geist text-sm leading-5 text-ink border-none outline-none focus:ring-2 focus:ring-ocean transition placeholder:text-ink/50" />
                    </div>
                </div>

                <!-- Row 2 -->
                <div class="flex flex-col md:flex-row gap-6 w-full">
                    <div class="flex-1 flex flex-col gap-3.5">
                        <label for="phone" class="font-geist font-normal text-sm leading-5 text-ink">Phone Number*</label>
                        <input
                            type="tel"
                            id="phone"
                            name="phone"
                            required
                            inputmode="numeric"
                            autocomplete="tel"
                            pattern="^\\d{3}-\\d{3}-\\d{4}$"
                            title="Please enter a 10-digit phone number (e.g., 914-555-1234)."
                            maxlength="12"
                            class="bg-crema rounded-lg px-6 py-4 font-geist text-sm leading-5 text-ink border-none outline-none focus:ring-2 focus:ring-ocean transition placeholder:text-ink/50"
                        />
                    </div>
                    <div class="flex-1 flex flex-col gap-3.5">
                        <label for="email" class="font-geist font-normal text-sm leading-5 text-ink">Email*</label>
                        <input
                            type="email"
                            id="email"
                            name="email"
                            required
                            inputmode="email"
                            autocomplete="email"
                            spellcheck="false"
                            autocapitalize="none"
                            pattern="^[^\s@]+@[^\s@]+\.[^\s@]+$"
                            title="Enter a valid email (e.g., you@example.com)."
                            class="bg-crema rounded-lg px-6 py-4 font-geist text-sm leading-5 text-ink border-none outline-none focus:ring-2 focus:ring-ocean transition placeholder:text-ink/50"
                        />
                    </div>
                </div>


                <!-- Row 3: Position -->

                <div class="flex flex-col md:flex-row gap-6 w-full">
                    <div class="flex-1 flex flex-col gap-3.5">
                        <label class="font-geist font-normal text-sm leading-5 text-ink">Position of Interest*</label>
                        <div class="relative" data-dropdown="position">
                            <button type="button" class="bg-crema rounded-lg px-6 py-4 w-full font-geist text-sm leading-5 text-ink border-none outline-none focus:ring-2 focus:ring-ocean transition cursor-pointer flex justify-between items-center" aria-haspopup="listbox" aria-expanded="false">
                                <span class="dropdown-label text-ink/50">Choose a position</span>
                                <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg" class="transition-transform duration-300">
                                    <path d="M1 1.5L6 6.5L11 1.5" stroke="#202020" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                </svg>
                            </button>
                            <input type="hidden" name="position" id="position" required />
                            <div class="dropdown-menu absolute left-0 right-0 top-full mt-1 bg-crema rounded-lg shadow-lg z-20 hidden overflow-hidden">
                                <label class="flex items-center gap-3 px-6 py-3 hover:bg-tortilla cursor-pointer transition-colors">
                                    <input type="radio" name="position_radio" value="Server" class="w-4 h-4 accent-ocean cursor-pointer" />
                                    <span class="font-geist text-sm text-ink">Server</span>
                                </label>
                                <label class="flex items-center gap-3 px-6 py-3 hover:bg-tortilla cursor-pointer transition-colors">
                                    <input type="radio" name="position_radio" value="Line Cook" class="w-4 h-4 accent-ocean cursor-pointer" />
                                    <span class="font-geist text-sm text-ink">Line Cook</span>
                                </label>
                                <label class="flex items-center gap-3 px-6 py-3 hover:bg-tortilla cursor-pointer transition-colors">
                                    <input type="radio" name="position_radio" value="Bartender" class="w-4 h-4 accent-ocean cursor-pointer" />
                                    <span class="font-geist text-sm text-ink">Bartender</span>
                                </label>
                                <label class="flex items-center gap-3 px-6 py-3 hover:bg-tortilla cursor-pointer transition-colors">
                                    <input type="radio" name="position_radio" value="Manager" class="w-4 h-4 accent-ocean cursor-pointer" />
                                    <span class="font-geist text-sm text-ink">Manager</span>
                                </label>
                                <label class="flex items-center gap-3 px-6 py-3 hover:bg-tortilla cursor-pointer transition-colors">
                                    <input type="radio" name="position_radio" value="Other" class="w-4 h-4 accent-ocean cursor-pointer" />
                                    <span class="font-geist text-sm text-ink">Other</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="flex-1 flex flex-col gap-3.5">
                        <label for="location" class="font-geist font-normal text-sm leading-5 text-ink">Location Preference*</label>
                        <div class="relative" data-dropdown="location">
                            <button type="button" class="bg-crema rounded-lg px-6 py-4 w-full font-geist text-sm leading-5 text-ink border-none outline-none focus:ring-2 focus:ring-ocean transition cursor-pointer flex justify-between items-center" aria-haspopup="listbox" aria-expanded="false">
                                <span class="dropdown-label text-ink/50">Select location preferences</span>
                                <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg" class="transition-transform duration-300">
                                    <path d="M1 1.5L6 6.5L11 1.5" stroke="#202020" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                </svg>
                            </button>
                            <div class="dropdown-menu absolute left-0 right-0 top-full mt-1 bg-crema rounded-lg shadow-lg z-20 hidden overflow-hidden">
                                <label class="flex items-center gap-3 px-6 py-3 hover:bg-tortilla cursor-pointer transition-colors">
                                    <input type="checkbox" name="location[]" value="Tarrytown, NY" class="w-4 h-4 accent-ocean cursor-pointer" />
                                    <span class="font-geist text-sm text-ink">Tarrytown, NY</span>
                                </label>
                                <label class="flex items-center gap-3 px-6 py-3 hover:bg-tortilla cursor-pointer transition-colors">
                                    <input type="checkbox" name="location[]" value="Yonkers, NY" class="w-4 h-4 accent-ocean cursor-pointer" />
                                    <span class="font-geist text-sm text-ink">Yonkers, NY</span>
                                </label>
                                <label class="flex items-center gap-3 px-6 py-3 hover:bg-tortilla cursor-pointer transition-colors">
                                    <input type="checkbox" name="location[]" value="Pleasantville, NY" class="w-4 h-4 accent-ocean cursor-pointer" />
                                    <span class="font-geist text-sm text-ink">Pleasantville, NY</span>
                                </label>
                                <label class="flex items-center gap-3 px-6 py-3 hover:bg-tortilla cursor-pointer transition-colors">
                                    <input type="checkbox" name="location[]" value="Bronxville, NY" class="w-4 h-4 accent-ocean cursor-pointer" />
                                    <span class="font-geist text-sm text-ink">Bronxville, NY</span>
                                </label>
                                <label class="flex items-center gap-3 px-6 py-3 hover:bg-tortilla cursor-pointer transition-colors">
                                    <input type="checkbox" name="location[]" value="Stamford, CT" class="w-4 h-4 accent-ocean cursor-pointer" />
                                    <span class="font-geist text-sm text-ink">Stamford, CT</span>
                                </label>
                                <label class="flex items-center gap-3 px-6 py-3 hover:bg-tortilla cursor-pointer transition-colors">
                                    <input type="checkbox" name="location[]" value="New Rochelle, NY" class="w-4 h-4 accent-ocean cursor-pointer" />
                                    <span class="font-geist text-sm text-ink">New Rochelle, NY</span>
                                </label>
                                <label class="flex items-center gap-3 px-6 py-3 hover:bg-tortilla cursor-pointer transition-colors border-t border-ink/10">
                                    <input type="checkbox" name="location[]" value="No Preference" class="w-4 h-4 accent-ocean cursor-pointer" />
                                    <span class="font-geist text-sm text-ink">No Preference</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex flex-col gap-3.5 w-full">
                    <label for="cover_letter" class="font-geist font-normal text-sm leading-5 text-ink">Why would you make a great teammate?</label>
                    <textarea id="cover_letter" name="cover_letter" rows="4" class="bg-crema rounded-lg px-6 py-4 font-geist text-sm leading-5 text-ink border-none outline-none focus:ring-2 focus:ring-ocean transition resize-none"></textarea>
                </div>


                <div class="flex flex-col gap-3.5 w-full max-w-md">
                    <label for="resume" class="font-geist font-normal text-sm leading-5 text-ink">Upload Resume* <span class="font-normal text-xs text-ink/60">(Max. file size: 10 MB)</span></label>
                    <div class="relative">
                        <input type="file" id="resume" name="resume" required accept=".pdf,.doc,.docx,.pages,.rtf,.txt" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10" />
                        <div class="bg-crema rounded-lg px-6 py-4 w-full flex justify-between items-center border border-dashed border-ink/20">
                            <span class="font-geist text-ink/50 text-sm resume-filename">Choose file...</span>
                            <span class="font-geist text-ink text-sm underline">Browse</span>
                        </div>
                    </div>
                </div>

                

                <!-- Submit Button -->
                <div class="flex justify-start">
                    <button type="submit" class="bg-hot-sauce text-crema rounded-lg px-5 py-2 font-geist font-normal text-sm leading-5 uppercase hover:opacity-90 transition-opacity cursor-pointer">Submit Form</button>
                </div>
            </form>

            <div id="apply-success" role="status" aria-live="polite" class="hidden flex">
                <div class="max-w-2xl bg-crema border border-hot-sauce/40 rounded-2xl px-6 py-8 flex flex-col gap-4 shadow-md">
                    <p class="font-futura text-hot-sauce text-4xl leading-tight uppercase">Thank you for applying!</p>
                    <p class="font-geist text-ink text-sm leading-5">
                        Thanks! We have received your application. Someone from our team will be reviewing your info, and will be in touch with the next steps.
                    </p>
                    <div class="flex flex-wrap gap-4">
                        <a href="/" class="btn btn-primary inline-flex items-center gap-2 bg-hot-sauce text-crema font-geist text-sm uppercase px-6 py-3 hover:opacity-90 transition-opacity w-fit">
                            Back to Home
                            <svg class="w-4 h-4" aria-hidden="true" focusable="false">
                                <use href="#icon-arrow-right"></use>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <StoreSlider />

    <script>
        // Location dropdown with checkboxes
        document.querySelectorAll('[data-dropdown="location"]').forEach((dropdown) => {
            const button = dropdown.querySelector('button');
            const menu = dropdown.querySelector('.dropdown-menu');
            const label = dropdown.querySelector('.dropdown-label');
            const checkboxes = dropdown.querySelectorAll('input[type="checkbox"]');
            const arrow = button?.querySelector('svg');

            // Toggle dropdown
            button?.addEventListener('click', () => {
                const isOpen = menu?.classList.contains('hidden') === false;
                menu?.classList.toggle('hidden');
                button.setAttribute('aria-expanded', (!isOpen).toString());
                arrow?.classList.toggle('rotate-180');
            });

            // Update label when checkboxes change
            checkboxes.forEach((checkbox) => {
                checkbox.addEventListener('change', () => {
                    const checked = Array.from(checkboxes)
                        .filter((cb) => (cb as HTMLInputElement).checked)
                        .map((cb) => cb.nextElementSibling?.textContent?.trim());

                    if (label) {
                        if (checked.length === 0) {
                            label.textContent = 'Choose location(s)';
                            label.classList.add('text-ink/50');
                            label.classList.remove('text-ink');
                        } else {
                            label.textContent = checked.join(', ');
                            label.classList.remove('text-ink/50');
                            label.classList.add('text-ink');
                        }
                    }
                });
            });

            // Close when clicking outside
            document.addEventListener('click', (e) => {
                if (!dropdown.contains(e.target as Node)) {
                    menu?.classList.add('hidden');
                    button?.setAttribute('aria-expanded', 'false');
                    arrow?.classList.remove('rotate-180');
                }
            });
        });

        // Position dropdown with radio buttons
        document.querySelectorAll('[data-dropdown="position"]').forEach((dropdown) => {
            const button = dropdown.querySelector('button');
            const menu = dropdown.querySelector('.dropdown-menu');
            const label = dropdown.querySelector('.dropdown-label');
            const radios = dropdown.querySelectorAll('input[type="radio"]');
            const hiddenInput = dropdown.querySelector('input[type="hidden"]') as HTMLInputElement;
            const arrow = button?.querySelector('svg');

            // Toggle dropdown
            button?.addEventListener('click', () => {
                const isOpen = menu?.classList.contains('hidden') === false;
                menu?.classList.toggle('hidden');
                button.setAttribute('aria-expanded', (!isOpen).toString());
                arrow?.classList.toggle('rotate-180');
            });

            // Update label and hidden input when radio changes
            radios.forEach((radio) => {
                radio.addEventListener('change', () => {
                    const selected = radio.nextElementSibling?.textContent?.trim();
                    const value = (radio as HTMLInputElement).value;

                    if (label && selected) {
                        label.textContent = selected;
                        label.classList.remove('text-ink/50');
                        label.classList.add('text-ink');
                    }

                    if (hiddenInput) {
                        hiddenInput.value = value;
                    }

                    // Close dropdown after selection
                    menu?.classList.add('hidden');
                    button?.setAttribute('aria-expanded', 'false');
                    arrow?.classList.remove('rotate-180');
                });
            });

            // Close when clicking outside
            document.addEventListener('click', (e) => {
                if (!dropdown.contains(e.target as Node)) {
                    menu?.classList.add('hidden');
                    button?.setAttribute('aria-expanded', 'false');
                    arrow?.classList.remove('rotate-180');
                }
            });
        });

        // Phone number masking (###-###-####)
        const phoneInput = document.getElementById('phone');
        if (phoneInput instanceof HTMLInputElement) {
            const formatPhone = (value) => {
                const digits = value.replace(/\D/g, '').slice(0, 10);
                const parts = [];
                if (digits.length > 0) parts.push(digits.slice(0, Math.min(3, digits.length)));
                if (digits.length > 3) parts.push(digits.slice(3, Math.min(6, digits.length)));
                if (digits.length > 6) parts.push(digits.slice(6, 10));
                return parts.join('-');
            };

            phoneInput.addEventListener('input', () => {
                const formatted = formatPhone(phoneInput.value);
                phoneInput.value = formatted;
            });
        }

        // Email normalization
        const emailInput = document.getElementById('email');
        if (emailInput instanceof HTMLInputElement) {
            const normalizeEmail = () => {
                emailInput.value = emailInput.value.trim().toLowerCase();
            };

            emailInput.addEventListener('blur', normalizeEmail);
            emailInput.addEventListener('change', normalizeEmail);
        }

        // Resume file name preview
        const resumeInput = document.getElementById('resume');
        const resumeLabel = document.querySelector('.resume-filename');
        if (resumeInput instanceof HTMLInputElement && resumeLabel) {
            resumeInput.addEventListener('change', () => {
                const file = resumeInput.files && resumeInput.files[0];
                resumeLabel.textContent = file ? file.name : 'Choose file...';
                resumeLabel.classList.toggle('text-ink/50', !file);
                resumeLabel.classList.toggle('text-ink', Boolean(file));
            });
        }

        // Scroll-synced rotation now handled by ScrollWiggle component

        // Smooth scroll with 120px offset for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                if (targetElement) {
                    const offset = 100;
                    const elementPosition = targetElement.getBoundingClientRect().top;
                    const offsetPosition = elementPosition + window.scrollY - offset;

                    window.scrollTo({
                        top: offsetPosition,
                        behavior: "smooth"
                    });
                }
            });
        });

        // Show Netlify success confirmation
        const successBanner = document.getElementById('apply-success');
        const careersForm = document.getElementById('careers-form');
        const params = new URLSearchParams(window.location.search);
        if (params.get('success') === 'true' && successBanner && careersForm) {
            successBanner.classList.remove('hidden');
            successBanner.setAttribute('aria-live', 'polite');
            careersForm.classList.add('hidden');
            window.history.replaceState({}, '', window.location.pathname + window.location.hash);
        }
    </script>
</BaseLayout>
